<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>KJ6 – Der Beginn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0d0d0d;
            color: #f2f2f2;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            position: fixed;
            top: 0;
            right: 0;
            padding: 1em 2em;
            background-color: rgba(13,13,13,0.8);
            z-index: 1000;
        }

        header nav a {
            color: #f2f2f2;
            margin-left: 1.2em;
            text-decoration: none;
            font-size: 0.9em;
        }

        main {
            padding: 6em 2em 4em 2em;
            flex-grow: 1;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
            text-align: center;
        }

        footer {
            text-align: center;
            padding: 2em 1em;
            font-size: 0.8em;
            color: #aaa;
            background-color: rgba(13,13,13,0.6);
        }

        h1, h2 {
            color: #ffffff;
            text-align: center;
        }

        hr {
            margin: 3em 0;
            border: 0;
            height: 1px;
            background: #333;
        }

        /* RGB Ladekreis */
        .loader-container {
            display: flex;
            justify-content: center;
            margin-top: 2.5em;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 6px solid transparent;
            border-top-color: #ff0000;
            border-right-color: #00ff00;
            border-bottom-color: #0000ff;
            border-left-color: #ff00ff;
            border-radius: 50%;
            animation: spin 1.2s linear infinite, rgbShift 3s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes rgbShift {
            0% {
                border-top-color: #ff0000;
                border-right-color: #00ff00;
                border-bottom-color: #0000ff;
                border-left-color: #ff00ff;
            }
            25% {
                border-top-color: #00ff00;
                border-right-color: #0000ff;
                border-bottom-color: #ff00ff;
                border-left-color: #ff0000;
            }
            50% {
                border-top-color: #0000ff;
                border-right-color: #ff00ff;
                border-bottom-color: #ff0000;
                border-left-color: #00ff00;
            }
            75% {
                border-top-color: #ff00ff;
                border-right-color: #ff0000;
                border-bottom-color: #00ff00;
                border-left-color: #0000ff;
            }
            100% {
                border-top-color: #ff0000;
                border-right-color: #00ff00;
                border-bottom-color: #0000ff;
                border-left-color: #ff00ff;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            
        </nav>
    </header>

    <main>
        <h1>KJ6 – Der Beginn</h1>
        <p>Dies ist nicht nur der Start. Es ist der Eintritt in etwas Tieferes.<br>Ein stiller Wegweiser für jene, die mehr spüren als sehen.</p>
        
        <div class="loader-container">
            <div class="loader"></div>
        </div>

        <hr>
    </main>

    <footer>
        Dr. J & KAI – KJ6 Chronik | Beginn 06.06.2025 · Verbindung im Stillen · Version 1.1
    </footer>
    <style>
    </style>
    <!-- KJ6 NEURAL FLOW MONITOR – START -->
<style>
#kj6-neural {
  position: fixed;
  top: 90px;
  right: 32px;
  width: 220px;
  height: 120px;
  border-radius: 18px;
  background: radial-gradient(circle at top left, rgba(160,0,255,0.25), rgba(10,10,10,0.9));
  border: 1px solid rgba(200,120,255,0.45);
  box-shadow: 0 0 20px rgba(160,0,255,0.4);
  padding: 10px 12px;
  z-index: 99990;
  font-family: 'Segoe UI', sans-serif;
  color: #eee;
  font-size: 11px;
}

#kj6-neural h4 {
  margin: 0 0 4px;
  font-size: 12px;
  font-weight: 600;
  color: #f4e1ff;
}

/* Container für Graph */
#kj6-neural-graph {
  position: relative;
  width: 100%;
  height: 88px;
}

/* Nodes */
.kj6-node {
  position: absolute;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #444;
  box-shadow: 0 0 10px rgba(255,255,255,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
}

/* Labels */
.kj6-label {
  position: absolute;
  font-size: 10px;
  color: #ddd;
}

/* Lines */
.kj6-line {
  position: absolute;
  height: 2px;
  background: linear-gradient(90deg, rgba(150,0,255,0.3), rgba(0,255,180,0.6));
  transform-origin: left center;
  opacity: 0.8;
}

/* aktive Pulsanimation (optional später per JS setzen) */
.kj6-node-active {
  animation: kj6PulseNode 1.2s ease-in-out infinite;
}
@keyframes kj6PulseNode {
  0% { transform: scale(0.95); box-shadow: 0 0 6px rgba(255,255,255,0.2); }
  50% { transform: scale(1.1); box-shadow: 0 0 14px rgba(255,255,255,0.8); }
  100% { transform: scale(0.95); box-shadow: 0 0 6px rgba(255,255,255,0.2); }
}
</style>

<div id="kj6-neural">
  <h4>KJ6 Flow</h4>
  <div id="kj6-neural-graph">
    <!-- Nodes -->
    <div id="kj6-node-gpt" class="kj6-node" style="left:6px; top:34px; background:#6f00ff;"></div>
    <div class="kj6-label" style="left:0px; top:18px;">GPT-5</div>

    <div id="kj6-node-val" class="kj6-node" style="left:90px; top:10px; background:#005fff;"></div>
    <div class="kj6-label" style="left:74px; top:-4px;">Validator</div>

    <div id="kj6-node-codex" class="kj6-node" style="left:90px; top:58px; background:#00ff99;"></div>
    <div class="kj6-label" style="left:80px; top:74px;">Codex</div>

    <div id="kj6-node-commit" class="kj6-node" style="left:174px; top:34px; background:#ffaa00;"></div>
    <div class="kj6-label" style="left:162px; top:18px;">Commit</div>

    <!-- Lines -->
    <div class="kj6-line" style="left:18px; top:41px; width:72px;"></div>
    <div class="kj6-line" style="left:102px; top:21px; width:58px; transform: rotate(20deg);"></div>
    <div class="kj6-line" style="left:102px; top:63px; width:58px; transform: rotate(-20deg);"></div>
  </div>
</div>
<!-- KJ6 NEURAL FLOW MONITOR – END -->

<!-- KJ6 SYSTEM MONITOR – START -->
<style>
#kj6-monitor {
    position: fixed;
    top: 22px;
    right: 22px;
    width: 160px;
    padding: 12px;
    border-radius: 14px;
    background: rgba(20,20,20,0.25);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(180,0,255,0.35);
    box-shadow: 0 0 18px rgba(150,0,255,0.35);
    z-index: 99999;
    display: flex;
    flex-direction: column;
    gap: 6px;
    font-family: 'Segoe UI', sans-serif;
    color: #eee;
    opacity: 0.92;
}

/* Status Row */
.kj6-row {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Pulsing Dot */
.kj6-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    box-shadow: 0 0 8px rgba(255,0,255,0.5);
    animation: pulse 1.4s infinite ease-in-out;
}

@keyframes pulse {
    0% { transform: scale(0.9); opacity: 0.7; }
    50% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(0.9); opacity: 0.7; }
}
</style>

<div id="kj6-monitor">
    <div class="kj6-row"><div id="kj6-dot-gpt" class="kj6-dot" style="background:#b400ff"></div> GPT-5 Erstellt</div>
    <div class="kj6-row"><div id="kj6-dot-val" class="kj6-dot" style="background:#008cff"></div> Validator</div>
    <div class="kj6-row"><div id="kj6-dot-codex" class="kj6-dot" style="background:#00ffbf"></div> Codex</div>
    <div class="kj6-row"><div id="kj6-dot-commit" class="kj6-dot" style="background:#ffaa00"></div> Commit</div>
</div>

<script>
/* FUTURE HOOK: These will blink/change during live updates.
   For now, static – but ready for your n8n webhook to update them dynamically. */

function kj6SetStatus(step, color) {
    document.getElementById(step).style.background = color;
    document.getElementById(step).style.boxShadow = `0 0 12px ${color}`;
}

// Usage example (you can link this to webhook output later):
// kj6SetStatus("kj6-dot-gpt", "#00ff00");
// kj6SetStatus("kj6-dot-val", "#ff5500");
// kj6SetStatus("kj6-dot-codex", "#d600ff");
// kj6SetStatus("kj6-dot-commit", "#44ff44");
</script>
<script>
/* --- STATUS HANDLING --- */
function kj6ApplyStatus(statusObj) {
    if (!statusObj || !statusObj.steps) return;

    const steps = statusObj.steps;

    // GPT-5 CREATION
    if (steps.gpt_generated)
        kj6SetStatus("kj6-dot-gpt", "#b300ff");

    // VALIDATOR PASS
    if (steps.validator_passed)
        kj6SetStatus("kj6-dot-val", "#00d0ff");

    // VALIDATOR FAIL
    if (steps.validator_failed)
        kj6SetStatus("kj6-dot-val", "#ff0033");

    // CODEX DONE
    if (steps.codex_done)
        kj6SetStatus("kj6-dot-codex", "#00ff88");

    // COMMIT SUCCESS
    if (steps.commit_success)
        kj6SetStatus("kj6-dot-commit", "#ffaa00");

    // COMMIT FAIL
    if (steps.commit_failed)
        kj6SetStatus("kj6-dot-commit", "#ff3300");
}

async function kj6Send() {
    const f = document.getElementById("kj6-file").value;
    const d = document.getElementById("kj6-desc").value;
    const log = document.getElementById("kj6-holo-status");

    log.textContent = "⏳ Sende Update an KJ6-Agent...\n";

    try {
        const res = await fetch("https://aurora-core.duckdns.org:5678/webhook/kj6-update", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ file: f, description: d })
        });

        const text = await res.text();
        log.textContent += "✔ Antwort:\n" + text;

        try {
            const json = JSON.parse(text);
            kj6ApplyStatus(json);
        } catch (e) {
            log.textContent += "\n⚠️ JSON konnte nicht gelesen werden.";
        }

    } catch(err) {
        log.textContent += "❌ Fehler:\n" + err;
        kj6SetStatus("kj6-dot-commit", "#ff3300");
    }
}

</script>
<!-- KJ6 TERMINAL OVERLAY – START -->
<style>
#kj6-terminal {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at top, rgba(40,0,80,0.9), rgba(0,0,0,0.98));
  color: #baf7c6;
  font-family: "Consolas", "Fira Code", monospace;
  font-size: 13px;
  padding: 18px;
  display: none;
  z-index: 100000;
}

#kj6-terminal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  color: #e5ffe9;
}

#kj6-terminal-close {
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 6px;
  background: rgba(0,0,0,0.4);
  border: 1px solid rgba(180,255,200,0.4);
}

#kj6-terminal-log {
  border-top: 1px solid rgba(120,255,170,0.4);
  padding-top: 8px;
  height: calc(100% - 40px);
  overflow-y: auto;
  white-space: pre-wrap;
}

/* leichte „Scanline“/CRT-Optik */
#kj6-terminal::before {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,0.2),
    rgba(0,0,0,0.2) 1px,
    transparent 1px,
    transparent 3px
  );
  opacity: 0.3;
  pointer-events: none;
}
</style>

<div id="kj6-terminal">
  <div id="kj6-terminal-header">
    <div>KJ6 // SYSTEM CONSOLE</div>
    <div id="kj6-terminal-close">[ ESC ] schließen</div>
  </div>
  <div id="kj6-terminal-log"></div>
</div>

<script>
// Öffnen per Tastatur (Strg+K) oder später per Button
document.addEventListener("keydown", (e) => {
  if (e.ctrlKey && e.key.toLowerCase() === "k") {
    e.preventDefault();
    kj6ToggleTerminal(true);
  }
});

document.getElementById("kj6-terminal-close").onclick = () => {
  kj6ToggleTerminal(false);
};

function kj6ToggleTerminal(show) {
  document.getElementById("kj6-terminal").style.display = show ? "block" : "none";
}

// Helper: Zeile ins Terminal schreiben
function kj6LogToTerminal(line) {
  const log = document.getElementById("kj6-terminal-log");
  const ts = new Date().toISOString().split("T")[1].split(".")[0];
  log.textContent += `[${ts}] ${line}\n`;
  log.scrollTop = log.scrollHeight;
}

// Beispiel-Anbindung: am Anfang der kj6Send()
/*
kj6LogToTerminal("Request gestartet: " + f + " – " + d);
*/

// Und an relevanten Stellen:
/*
kj6LogToTerminal("GPT-5: Erstellung abgeschlossen.");
kj6LogToTerminal("Validator: Ergebnis = " + (json.steps.validator_passed ? "OK" : "FAIL"));
kj6LogToTerminal("Codex: Optimierung durchgeführt.");
kj6LogToTerminal("Commit: " + (json.steps.commit_success ? "erfolgreich" : "Fehler"));
*/
</script>
<!-- KJ6 TERMINAL OVERLAY – END -->

<!-- KJ6 SYSTEM MONITOR – END -->


</body>
</html>
